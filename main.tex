\documentclass[aspectratio=169, 10pt]{beamer}

% Color package
\usepackage[table]{xcolor}
\usepackage{multimedia}
\usepackage{etoolbox}
\makeatletter
\patchcmd{\Ginclude@eps}{"#1"}{#1}{}{}
\makeatother

% Slide colors
\definecolor{tx_sl_color}{RGB}{0, 0, 0}
\definecolor{bg_sl_color}{RGB}{255, 255, 255}
%\definecolor{fg_sl_color}{HTML}{B10B25}
\definecolor{fg_sl_color}{HTML}{0F6E91}

\colorlet{ft_color}{fg_sl_color!75!tx_sl_color}

\colorlet{fg_bib_color}{tx_sl_color}
\colorlet{fg_bib_color}{tx_sl_color}
\colorlet{hl_bib_color}{fg_sl_color}

% Color box colors
\definecolor{bg_cb_color}{RGB}{255, 255, 255}
\colorlet{fg_cb_color}{fg_sl_color}

% Matlab colors
\definecolor{mycolor1}{rgb}{0.00000,0.44700,0.74100}
\definecolor{mycolor2}{rgb}{0.85000,0.32500,0.09800}
\definecolor{mycolor3}{rgb}{0.92900,0.69400,0.12500}
\definecolor{mycolor4}{rgb}{0.49400,0.18400,0.55600}
\definecolor{mycolor5}{rgb}{0.46600,0.67400,0.18800}
\definecolor{mycolor6}{rgb}{0.30100,0.74500,0.93300}
\definecolor{mycolor7}{rgb}{0.63500,0.07800,0.18400}

% Set beamer theme
\setbeamercolor{normal text}{
  fg = tx_sl_color
}
\beamertemplatenavigationsymbolsempty
\setbeamercolor{frametitle}{
  bg = bg_sl_color,
  fg = fg_sl_color
}
\setbeamerfont{frametitle}{
  family = \fontfamily{qag}\selectfont\bfseries
}
\setbeamercolor{background canvas}{
  bg = bg_sl_color
}
\setbeamercolor{structure}{
  bg = bg_sl_color,
  fg = fg_sl_color
}

\makeatletter
\setbeamerfont{footline}{
  size = \scriptsize
}
\setbeamertemplate{footline}{
  \leavevmode\centering%
  \hbox{%
  \begin{beamercolorbox}[
      wd = 0.245\paperwidth,
      ht = 2.25ex,
      dp = 1.00ex,
      left
    ]{myauthor in head/foot}%
    \textcolor{ft_color}{\insertauthor{}} %~(\insertinstitute{})
  \end{beamercolorbox}%
  \begin{beamercolorbox}[
      wd = 0.50\paperwidth,
      ht = 2.25ex,
      dp = 1.00ex,
      center
    ]{myframe number in head/foot}%
    \textcolor{ft_color}{\insertshortdate{}}%
  \end{beamercolorbox}%
  \begin{beamercolorbox}[
      wd = 0.245\paperwidth,
      ht = 2.25ex,
      dp = 1.00ex,
      right
    ]{mydate in head/foot}%
    \textcolor{ft_color}{\insertframenumber{}/\inserttotalframenumber{}}%
  \end{beamercolorbox}}%
  \vskip0pt%
}
\makeatother
\usepackage{appendixnumberbeamer}

% Enumerate and itemize
\setbeamertemplate{enumerate items}[square]
\setbeamertemplate{itemize items}[circle]
\setbeamercovered{transparent}

% Table of contents
\setbeamertemplate{section in toc}[square]
\setbeamerfont{section in toc}{
  family = \fontfamily{qag}\selectfont\bfseries
}
\setbeamerfont{subsection in toc}{
  shape = \itshape
}
\setbeamertemplate{section in toc shaded}[default][25]
\setbeamertemplate{subsection in toc shaded}[default][25]

% Recreate the numbered boxes
\newcommand\boxednumber[1]
{%
  \hbox{%
    \usebeamerfont*{item projected}%
    \usebeamercolor[bg]{item projected}%
    \vrule width2.25ex height1.85ex depth.4ex%
    \hskip-2.25ex%
    \hbox to2.25ex{%
      \hfil%
      \color{fg}#1%
      \hfil}%
  }%
}

% Figures
\usepackage{graphicx}
\usepackage{overpic}

% Tables
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{makecell}
\usepackage{multirow}
\usepackage{multicol}
\usepackage{nicematrix}
\newcolumntype{Y}{>{\centering\arraybackslash}X}
\renewcommand{\theadalign}{cl}
\renewcommand{\cellalign}{cl}

% Math
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}

% Font
\usepackage[default]{gillius}
\usepackage{sfmath}
\usepackage{sansmathaccent}
\usepackage{setspace}
%\usefonttheme[onlymath]{serif}
\newcommand\msmall[1]{\mbox{\small\ensuremath{#1}}}

% TikZ/PGFplots
\usepackage{tikz}                % to draw figures
\usepackage{pgfplots}            % external TikZ/PGF plots support
\pgfplotsset{compat=1.18}        % compatibility mode
\pgfkeys{/pgf/number format/.cd, 1000 sep={}} % no thousand separator in the plots
\usetikzlibrary{patterns}
\input{./figures/troll.tex}

% SI units
\usepackage{siunitx}
\sisetup{
  detect-all,
  retain-zero-exponent=false,
  parse-numbers=false,
  per-mode=symbol
}

% Color boxes
\usepackage[most]{tcolorbox}
\tcbuselibrary{skins}
\tcbuselibrary{listings, breakable}

% Boxed text environment
\newtcolorbox{tbbox}[1][]{
  enhanced,
  attach boxed title to top left = {
    xshift     =  4.0mm,
    yshift     = -3.0mm,
    yshifttext = -1.0mm
  },
  colback      = bg_cb_color,
  colframe     = fg_cb_color,
  colbacktitle = fg_cb_color,
  coltitle     = bg_cb_color,
  arc          = 3.0pt,
  boxrule      = 1.0pt,
  title        = {#1},
  fonttitle    = {\fontfamily{qag}\selectfont\large\bfseries},
  halign       = flush left,
  boxed title style = {
    size       = small,
    colframe   = fg_cb_color,
    arc        = 3.0pt
  }
}
\newenvironment{bbox}[1][]{\begin{tbbox}[#1]}{\end{tbbox}}

% Boxed text environment
\newenvironment{quag}[1][]{%
  \begingroup
    {\fontfamily{qag}\selectfont\Huge\color{fg_cb_color}\bfseries{#1}} \\[1.0em]
  \endgroup
  \begingroup
}{
  \endgroup
}

% Section without toc entry
\RequirePackage{ifthen}
\newboolean{sectiontoc}
\setboolean{sectiontoc}{true} % default to true
\newcommand{\toclesssection}[1]{ % section without toc entry
  \setboolean{sectiontoc}{false}
  \section{#1}
  \setboolean{sectiontoc}{true}
}

% Table of contents at the beginning of each section
\AtBeginSection[]{
  \begin{frame}[noframenumbering, plain]
    \ifthenelse{\boolean{sectiontoc}}{
      \begin{quag}[Outline]
        \tableofcontents[
          current,
          sectionstyle=show/shaded,
          subsectionstyle=show/show/hide,
          subsubsectionstyle=show/show/show/hide
        ]
      \end{quag}
    }{
      \begin{quag}[Outline]
        \tableofcontents[
          current,
          sectionstyle=show/show,
          subsectionstyle=show/hide/hide,
          subsubsectionstyle=show/show/show/hide
        ]
      \end{quag}
    }
  \end{frame}
}

% Add logo to the title page
\addtobeamertemplate{frametitle}{}{%
  \begin{tikzpicture}[remember picture, overlay]
    \node[anchor=north east, xshift=5pt, yshift=5pt] at (current page.north east) {\colorbox{fg_sl_color}{\includegraphics[height=1.0cm]{logo.png}}};
    %\draw[thick, fg_sl_color] ([yshift=-1cm-6pt] current page.north west) -- ([yshift=-1cm-6pt, xshift=\paperwidth] current page.north west);
  \end{tikzpicture}%
}

% Highlighted text
\newcommand{\hi}[1]{\textcolor{fg_sl_color}{\selectfont\color{fg_cb_color}\bfseries{#1}}}
\newcommand{\hic}[1]{\begin{center}\hi{\Large{#1}}\end{center}}

% Bibliography
\PassOptionsToPackage{%
  backend      = biber,        % instead of bibtex
  bibencoding  = utf8,         % special characters
  language     = auto,         % get the language of the main document
  style        = numeric-comp, % numeric citation style
  sorting      = none,         % sorted by appearance
  maxbibnames  = 10,           % default: 3, et al.
  maxcitenames = 10,           % default: 1, et al.
  natbib       = true,         % natbib compatibility mode (\citep and \citet still work)
}{biblatex}
\usepackage{biblatex} % to display bibliography
\usepackage{bibentry} % to insert bibliography entries inline
\emergencystretch = 1.0em

\setbeamercolor{bibliography entry author}{
  bg = bg_sl_color,
  fg = fg_sl_color
}
\setbeamercolor{bibliography entry location}{
  bg = bg_sl_color,
  fg = fg_bib_color
}
\setbeamercolor{bibliography entry note}{
  bg = bg_sl_color,
  fg = fg_bib_color
}
\setbeamercolor{bibliography entry title}{
  bg = bg_sl_color,
  fg = hl_bib_color
}
\setbeamertemplate{bibliography item}[triangle]
\setbeamercolor{bibliography item}{
  bg = bg_sl_color,
  fg = fg_sl_color
}

\DeclareFieldFormat{issn}{%
  \textsc{ISSN}\addcolon\space#1
}

\DeclareFieldFormat{doi}{%
  \textsc{DOI}\addcolon\space%
  \ifhyperref{%
  \href{https://doi.org/#1}{%
    \nolinkurl{#1}%
  }
  }{%
    \nolinkurl{#1}%
  }
}

\renewcommand*{\mkbibnamefamily}[1]{% mkbibcompletename
  \ifitemannotation{jointfirst}%
    {#1\textsuperscript{\dag}}%
    {#1}
}

\addbibresource{bibliography.bib}

% Miscellanea
\usepackage{authoraftertitle}
\usepackage{hyperref}
\usepackage{chemarrow}
\usepackage[normalem]{ulem}
\usepackage{soul}

% Graphics path
\graphicspath{{figures}}

% Acronyms
\usepackage{acronym}
\newacro{DSM}{Direct Stiffness Method}
\newacro{FE}{Finite Element}
\newacro{RT}{Real-Time}
\newacro{FEA}{Finite Element Analysis}
\newacro{FEM}{Finite Element Method}
\newacro{LEM}{Large Expression Management}
\newacro{LAST}{Linear Algebra Symbolic Toolbox}
\newacro{FFLU}{Fraction-Free Lower-Upper}
\newacro{LU}{Lower-Upper}
\newacro{MB}{Multi-Body}
\newacro{SVD}{Singular Value Decomposition}
\newacro{ODE}{Ordinary Differential Equation}
\newacro{DAE}{Differential-Algebraic Equation}
\newacro{DE}{Discrete Element}
\newacro{CAS}{Computer Algebra Systems}
\newacro{TPPC}{Trajectory Prescribed Path Control}
\newacro{MBD}{Multi-Body Dynamics}

% Goodlooking check, cross and warning marks
\usepackage{fontawesome5}        % to use icons in the document
\newcommand{\mycheckmark}{\textcolor{mycolor5}{{\footnotesize\faCheck}}}
\newcommand{\mycrossmark}{\textcolor{mycolor2}{{\small\faTimes}}}
\newcommand{\mywarnmark}{}%\textcolor{mycolor3}{{\scriptsize\faExclamationTriangle}}}
\newcommand{\mydotmark}{\textcolor{mycolor3}{\raisebox{-2pt }{\Large\textbullet}}}

% Code listings
\usepackage{algpseudocode}       % to write algorithms
\usepackage{algorithm}           % to write algorithms
\usepackage{algorithmicx}        % to write algorithms

\algrenewcommand\algorithmicindent{0.75em} % indentation of the algorithm

\algnewcommand{\IfThen}[2]{% \IfThenElse{<if>}{<then>}
  \State \algorithmicif\ #1\ \algorithmicthen\ #2}
\algnewcommand{\IfThenElse}[3]{% \IfThenElse{<if>}{<then>}{<else>}
  \State \algorithmicif\ #1\ \algorithmicthen\ #2\ \algorithmicelse\ #3}

\newcommand{\hlc}[2][fg_sl_color!25]{{%
  \colorlet{foo}{#1}%
  \sethlcolor{foo}\hl{#2}}%
}
\newcommand{\hlm}[2][fg_sl_color!25]{\colorbox{#1}{$#2$}}

% Software programs
\newcommand{\MacOS}{\textsc{MacOS}\textsuperscript{\textregistered}}
\newcommand{\Windows}{\textsc{Windows}\textsuperscript{\textregistered}}
\newcommand{\Linux}{\textsc{Linux}\textsuperscript{\textregistered}}
\newcommand{\MapleSoft}{\textsc{MapleSoft}\textsuperscript{\textregistered}}
\newcommand{\Maple}{\textsc{Maple}\textsuperscript{\textregistered}}
\newcommand{\Wolfram}{\textsc{Wolfram}}
\newcommand{\Mathematica}{\textsc{Mathematica}\textsuperscript{\textregistered}}
\newcommand{\Matlab}{\textsc{Matlab}\textsuperscript{\textregistered}}
\newcommand{\Modelica}{\textsc{Modelica}}
\newcommand{\OpenModelica}{\textsc{OpenModelica}}
\newcommand{\ModelingToolkit}{\textsc{ModelingToolkit}}
\newcommand{\Simulink}{\textsc{Simulink}\textsuperscript{\textregistered}}
\newcommand{\Mex}{\textsc{Mex}}
\newcommand{\SFunction}{\textsc{S-Function}}
\newcommand{\SymPy}{\textsc{SymPy}}
\newcommand{\Axiom}{\textsc{Axiom}}
\newcommand{\Derive}{\textsc{Derive}}
\newcommand{\Macsyma}{\textsc{Macsyma}}
\newcommand{\MuPAD}{\textsc{MuPAD}}
\newcommand{\Reduce}{\textsc{Reduce}}
\newcommand{\TrussMe}{\textsc{TrussMe-Fem}}
\newcommand{\Ansys}{\textsc{Ansys}\textsuperscript{\textregistered}}
\newcommand{\cf}{\ensuremath{\,\text{f}}}
\newcommand{\cm}{\ensuremath{\,\text{m}}}
\newcommand{\cd}{\ensuremath{\,\text{d}}}
\newcommand{\ca}{\ensuremath{\,\text{a}}}
\newcommand{\cv}{\ensuremath{\,\text{v}}}

% General commands
\newcommand{\eg}{\emph{e.g.}}
\newcommand{\ie}{\emph{i.e.}}
\newcommand{\USI}[1]{\unit{#1}}
\newcommand{\SSI}[2]{\SI{#1}{#2}}
\newcommand{\RSI}[3]{\lbrack\num{#1}{,}\ \num{#2}\rbrack\,\USI{#3}}

% Matrices and vectors
\newcommand{\dif}[2]{\ensuremath{{#1}_{#2}}}
\newcommand{\jac}[2]{\ensuremath{{#1}_{#2}}}
\newcommand{\hes}[2]{\ensuremath{{#1}_{#2}}}
\newcommand{\m}[1]{\ensuremath{\mathbf{#1}}}
\newcommand{\mx}{\ensuremath{\m{x}}}
\newcommand{\mxp}{\ensuremath{\mx^\prime}}
\newcommand{\mE}{\ensuremath{\m{E}(\mx, t)}}
\newcommand{\mg}{\ensuremath{\m{g}(\mx, t)}}
\newcommand{\ma}{\ensuremath{\m{a}(\mx, t)}}
\newcommand{\mA}{\ensuremath{\m{A}(\mx, t)}}
\newcommand{\mN}{\ensuremath{\m{N}(\mx, t)}}
\newcommand{\mK}{\ensuremath{\m{K}(\mx, t)}}
\newcommand{\mI}{\ensuremath{\m{I}}}
\newcommand{\mP}{\ensuremath{\m{P}}}
\newcommand{\mQ}{\ensuremath{\m{Q}}}
\newcommand{\mL}{\ensuremath{\m{L}(\mx, t)}}
\newcommand{\mU}{\ensuremath{\m{U}(\mx, t)}}
\newcommand{\mM}{\ensuremath{\m{M}(\mx, t)}}
\newcommand{\mb}{\ensuremath{\m{b}(\mx, t)}}
\newcommand{\mAd}{\ensuremath{\m{E}_{\m{a}}(\mx, t)}}
\newcommand{\mgd}{\ensuremath{\m{g}_{\m{a}}(\mx, t)}}
\newcommand{\mF}{\ensuremath{\m{F}(\mx, \mxp, t)}}
\newcommand{\mh}{\ensuremath{\m{h}(\mx, t)}}

\newcommand{\mv}{\ensuremath{\m{v}(\mx, t)}}
\newcommand{\mEv}{\ensuremath{\m{E}(\mx, \m{v}, t)}}
\newcommand{\mgv}{\ensuremath{\m{g}(\mx, \m{v}, t)}}
\newcommand{\mav}{\ensuremath{\m{a}(\mx, \m{v}, t)}}
\newcommand{\mvv}{\ensuremath{\m{v}(\mx, \m{v}, t)}}
\newcommand{\mAv}{\ensuremath{\m{A}(\mx, \m{v}, t)}}
\newcommand{\mNv}{\ensuremath{\m{N}(\mx, \m{v}, t)}}
\newcommand{\mKv}{\ensuremath{\m{K}(\mx, \m{v}, t)}}
\newcommand{\mLv}{\ensuremath{\m{L}(\mx, \m{v}, t)}}
\newcommand{\mUv}{\ensuremath{\m{U}(\mx, \m{v}, t)}}
\newcommand{\mMv}{\ensuremath{\m{M}(\mx, \m{v}, t)}}
\newcommand{\mbv}{\ensuremath{\m{b}(\mx, \m{v}, t)}}
\newcommand{\mAdv}{\ensuremath{\m{E}_{\m{a}}(\mx, \m{v}, t)}}
\newcommand{\mgdv}{\ensuremath{\m{g}_{\m{a}}(\mx, \m{v}, t)}}
\newcommand{\mFv}{\ensuremath{\m{F}(\mx, \mxp, \m{v}, t)}}
\newcommand{\mhv}{\ensuremath{\m{h}(\mx, \m{v}, t)}}
\newcommand{\mhiv}{\ensuremath{\m{h}_{i}(\mx, \m{v}, t)}}
\newcommand{\mhuv}{\ensuremath{\m{h}_{u}(\mx, \m{v}, t)}}

\newcommand{\mini}{\ensuremath{\mathrm{\min}}}
\newcommand{\maxi}{\ensuremath{\mathrm{\max}}}
\newcommand{\meai}{\ensuremath{\mathrm{\mu}}}
\newcommand{\vari}{\ensuremath{\mathrm{\sigma^2}}}

% Deletable text
\newcommand{\del}[1]{\textcolor{fg_sl_color!50!bg_sl_color}{\sout{#1}}}

% Title page
\title{Symbolic Computation Methods for the Numerical Solution of Dynamic Systems Described by Differential-Algebraic Equations}
\author{Davide Stocco}
\institute{University of Trento}
\date{August 1, 2024}

\begin{document}

\include{content/title}
\include{content/chapter_1}
\include{content/chapter_2}
\include{content/chapter_3}
\include{content/chapter_4}
\include{content/chapter_5}
\include{content/chapter_6}
\appendix
\include{content/extras_qa}
%\include{content/extras}

\end{document}

% That's all Folks!